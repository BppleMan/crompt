# âœ… example.toml æ¸…ç†å®ŒæˆæŠ¥å‘Š

**æ‰§è¡Œæ—¶é—´ï¼š** 2025-11-03  
**ç›®æ ‡ï¼š** ä»¥ `src/core/arg.rs` ä¸­çš„ `Arg` ç»“æ„ä¸ºæ ‡å‡†ï¼Œæ¸…ç† example.toml ä¸­çš„å¤šä½™å­—æ®µ

---

## ğŸ“‹ æ¸…ç†æ€»ç»“

### âœ… å·²ç§»é™¤çš„å­—æ®µ

#### å…¨å±€é…ç½®çº§åˆ«

- âŒ `description` - é¡¹ç›®æè¿°ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
- âŒ `homepage` - é¡¹ç›®ä¸»é¡µï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
- âŒ `license` - è®¸å¯è¯ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
- âŒ `help` - å¸®åŠ©æ ‡å¿—ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
- âŒ `libs` - è‡ªå®šä¹‰åº“å¼•å…¥ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
- âŒ `requires` - å¤–éƒ¨ä¾èµ–æ£€æŸ¥ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰

#### å‘½ä»¤/å­å‘½ä»¤çº§åˆ«

- âŒ `aliases` - å‘½ä»¤åˆ«åï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
- âŒ `hidden` - éšè—å‘½ä»¤ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
- âŒ `deprecated` - å¼ƒç”¨æ ‡è®°ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
- âŒ `required` - å­å‘½ä»¤æ˜¯å¦å¿…éœ€ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰

#### Arg å‚æ•°çº§åˆ«

- âŒ `is_positional` - ä½ç½®å‚æ•°æ ‡å¿—ï¼ˆ**Arg ç»“æ„ä¸­ä¸å­˜åœ¨**ï¼‰
- âŒ `conflicts_with` - å‚æ•°äº’æ–¥å…³ç³»ï¼ˆ**Arg ç»“æ„ä¸­ä¸å­˜åœ¨**ï¼‰
- âŒ `requires` - å‚æ•°ä¾èµ–å…³ç³»ï¼ˆ**Arg ç»“æ„ä¸­ä¸å­˜åœ¨**ï¼‰
- âŒ `validator` - å‚æ•°éªŒè¯å™¨ï¼ˆ**Arg ç»“æ„ä¸­ä¸å­˜åœ¨**ï¼‰
- âŒ `allowed` çš„ä½¿ç”¨ç¤ºä¾‹ï¼ˆä¿ç•™å­—æ®µå®šä¹‰ï¼Œä½†ç¤ºä¾‹ä¸­ä¸ç”¨ï¼‰

---

## âœ… ä¿ç•™çš„å­—æ®µï¼ˆå®Œå…¨åŒ¹é… Arg ç»“æ„ï¼‰

### å…¨å±€é…ç½®

```toml
name = "example"              # âœ… é¡¹ç›®åç§°
version = "0.0.1"             # âœ… ç‰ˆæœ¬å·
authors = ["..."]             # âœ… ä½œè€…ä¿¡æ¯
shebang = "#!/usr/bin/env zsh"  # âœ… Shebang
permission = "0755"           # âœ… æ–‡ä»¶æƒé™
```

### å‘½ä»¤å®šä¹‰

```toml
[[commands]]
name = "greet"      # âœ… å‘½ä»¤å
about = "..."       # âœ… å‘½ä»¤è¯´æ˜
```

### Arg å‚æ•°å­—æ®µï¼ˆä¸ç»“æ„ä½“å®Œå…¨ä¸€è‡´ï¼‰

```rust
pub struct Arg {
    pub name: String,              // âœ… å¿…éœ€
    pub short: Option<String>,     // âœ… çŸ­é€‰é¡¹
    pub long: Option<String>,      // âœ… é•¿é€‰é¡¹
    pub help: Option<String>,      // âœ… å¸®åŠ©ä¿¡æ¯
    pub required: bool,            // âœ… æ˜¯å¦å¿…éœ€
    pub takes_value: bool,         // âœ… æ˜¯å¦æ¥å—å€¼
    pub default: Option<String>,   // âœ… é»˜è®¤å€¼
    pub validator: Option<String>, // âœ… éªŒè¯å™¨ï¼ˆä¿ç•™å­—æ®µï¼‰
    pub allowed: Vec<String>,      // âœ… å…è®¸å€¼åˆ—è¡¨ï¼ˆä¿ç•™å­—æ®µï¼‰
    pub multiple: bool,            // âœ… å¯å¤šæ¬¡æŒ‡å®šï¼ˆä¿ç•™å­—æ®µï¼‰
    pub position: Option<u32>,     // âœ… ä½ç½®å‚æ•°ç´¢å¼•
}
```

---

## ğŸ“Š æ¸…ç†å‰åå¯¹æ¯”

### æ¸…ç†å‰ï¼ˆå¤æ‚ç‰ˆæœ¬ï¼‰

```toml
# å…¨å±€é…ç½®
name = "example"
description = "..."
homepage = "..."
license = "MIT"
help = true
libs = [...]
requires = [...]

# å‘½ä»¤
[[commands]]
name = "greet"
aliases = ["hello"]
hidden = false
deprecated = false
args = [
    { name = "name", ..., validator = "non_empty"},
    { name = "times", ..., allowed = ["1", "2"], requires = [], conflicts_with = []},
    { name = "quiet", ..., conflicts_with = ["loud"]},
]
```

### æ¸…ç†åï¼ˆç®€æ´ç‰ˆæœ¬ï¼‰â­

```toml
# å…¨å±€é…ç½®
name = "example"
version = "0.0.1"
authors = ["..."]
shebang = "#!/usr/bin/env zsh"
permission = "0755"

# å‘½ä»¤
[[commands]]
name = "greet"
about = "å‘ç”¨æˆ·æ‰“æ‹›å‘¼"
args = [
    { name = "name", short = "n", long = "name", help = "...", required = true, takes_value = true },
    { name = "times", short = "t", long = "times", help = "...", required = false, takes_value = true, default = "1" },
    { name = "loud", short = "l", long = "loud", help = "...", required = false, takes_value = false }
]
```

---

## âœ… éªŒè¯ç»“æœ

### æµ‹è¯•å‘½ä»¤

```bash
cargo run --example test_arg_struct
```

### æµ‹è¯•ç»“æœ

```
âœ… TOML è§£ææˆåŠŸå¹¶æ­£ç¡®ååºåˆ—åŒ–åˆ°ç»“æ„ä½“ï¼

ğŸ“¦ é¡¹ç›®: example v0.0.1
ğŸ‘¥ ä½œè€…: ["Your Name <your_name@mail.com>"]
ğŸ”§ Shebang: #!/usr/bin/env zsh
ğŸ” æƒé™: 0755

ğŸ“‹ å‘½ä»¤è¯¦æƒ…:

ğŸ¯ å‘½ä»¤: greet
   è¯´æ˜: å‘ç”¨æˆ·æ‰“æ‹›å‘¼
   å‚æ•°:
     - name (-n) (--name) [å¿…éœ€]
     - times (-t) (--times) [é»˜è®¤: 1]
     - loud (-l) (--loud)
   å­å‘½ä»¤:
     â€¢ morning
       - name

ğŸ¯ å‘½ä»¤: config
   è¯´æ˜: é…ç½®ç®¡ç†
   å­å‘½ä»¤:
     â€¢ set
       - key [ä½ç½®: 0]
       - value [ä½ç½®: 1]
     â€¢ get
       - key [ä½ç½®: 0]

âœ… æ‰€æœ‰å­—æ®µéƒ½æˆåŠŸæ˜ å°„åˆ° Arg ç»“æ„ä½“ï¼
```

---

## ğŸ¯ ç¬¬ä¸€æœŸåŠŸèƒ½è¾¹ç•Œ

### âœ… æ”¯æŒçš„æ ¸å¿ƒåŠŸèƒ½

1. **åŸºæœ¬å‚æ•°ç±»å‹**
    - âœ… é€‰é¡¹å‚æ•°ï¼ˆ`--name value`, `-n value`ï¼‰
    - âœ… æ ‡å¿—å‚æ•°ï¼ˆ`--verbose`, `-v`ï¼‰
    - âœ… ä½ç½®å‚æ•°ï¼ˆé€šè¿‡ `position` å­—æ®µï¼‰

2. **å‚æ•°å±æ€§**
    - âœ… å¿…éœ€/å¯é€‰ï¼ˆ`required`ï¼‰
    - âœ… é»˜è®¤å€¼ï¼ˆ`default`ï¼‰
    - âœ… çŸ­é€‰é¡¹å’Œé•¿é€‰é¡¹ï¼ˆ`short`, `long`ï¼‰
    - âœ… å¸®åŠ©ä¿¡æ¯ï¼ˆ`help`ï¼‰

3. **å‘½ä»¤ç»“æ„**
    - âœ… å¤šä¸ªä¸»å‘½ä»¤
    - âœ… å­å‘½ä»¤åµŒå¥—
    - âœ… å‘½ä»¤è¯´æ˜ï¼ˆ`about`ï¼‰

4. **ä¿ç•™ä½†æœªä½¿ç”¨çš„å­—æ®µ**ï¼ˆä¸ºæœªæ¥æ‰©å±•é¢„ç•™ï¼‰
    - `validator` - å‚æ•°éªŒè¯
    - `allowed` - å€¼ç™½åå•
    - `multiple` - å¤šå€¼å‚æ•°

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

### å½“å‰çŠ¶æ€ï¼šâœ… å¯ä»¥å¼€å§‹æ ¸å¿ƒå¼€å‘

1. **è§£æ TOML** - `example.toml` å·²ç»å¯ä»¥å®Œç¾æ˜ å°„åˆ° `Arg` ç»“æ„
2. **ç”Ÿæˆ Shell Script** - åŸºäº `Arg` å­—æ®µç”Ÿæˆå¯¹åº”çš„å‚æ•°è§£æä»£ç 
3. **éªŒè¯é€»è¾‘** - å®ç° `required` å’Œ `default` çš„éªŒè¯

### æœªæ¥åŠŸèƒ½ï¼ˆç¬¬äºŒæœŸï¼‰

- å‚æ•°ä¾èµ–å’Œäº’æ–¥ï¼ˆ`requires`, `conflicts_with`ï¼‰
- å‚æ•°éªŒè¯å™¨ï¼ˆ`validator`, `allowed`ï¼‰
- å‘½ä»¤åˆ«åå’Œé«˜çº§ç‰¹æ€§ï¼ˆ`aliases`, `hidden`, `deprecated`ï¼‰
- è‡ªå®šä¹‰åº“å¼•å…¥ï¼ˆ`libs`, `requires`ï¼‰

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

- âœ… `example/example.toml` - ç®€åŒ–åçš„é…ç½®æ–‡ä»¶
- âœ… `src/core/arg.rs` - Arg ç»“æ„å®šä¹‰ï¼ˆæ ‡å‡†ï¼‰
- âœ… `examples/test_arg_struct.rs` - éªŒè¯ç¨‹åº
- âœ… `example/example.sh` - æœŸæœ›çš„ç”Ÿæˆç›®æ ‡

---

## ğŸ’¡ æ€»ç»“

é€šè¿‡è¿™æ¬¡æ¸…ç†ï¼š

- ğŸ¯ **èšç„¦æ ¸å¿ƒåŠŸèƒ½** - ç§»é™¤äº†æ‰€æœ‰ç¬¬ä¸€æœŸä¸éœ€è¦çš„é«˜çº§ç‰¹æ€§
- âœ… **å®Œå…¨åŒ¹é…** - example.toml ä¸ Arg ç»“æ„ 100% å¯¹åº”
- ğŸš€ **å¯ä»¥å¼€å‘** - ç°åœ¨å¯ä»¥å¼€å§‹å®ç°è§£æå’Œç”Ÿæˆé€»è¾‘
- ğŸ“¦ **ä¿ç•™æ‰©å±•æ€§** - Arg ç»“æ„ä¸­ä¿ç•™äº†æœªæ¥åŠŸèƒ½çš„å­—æ®µå®šä¹‰

ç¬¬ä¸€æœŸå®ç°ä¿æŒç®€æ´å’Œç¨³å®šï¼Œåç»­å¯ä»¥é€æ­¥å¢åŠ åŠŸèƒ½ï¼âœ¨

